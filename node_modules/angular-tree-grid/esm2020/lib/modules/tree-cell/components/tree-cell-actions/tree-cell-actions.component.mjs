import { Component, Input, Output, EventEmitter } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../../../../pipes/pipe.safehtml";
export class TreeCellActionsComponent {
    constructor() {
        this.editcomplete = new EventEmitter();
        this.canceledit = new EventEmitter();
    }
    ngOnInit() {
        this.display_data = this.store.getDisplayData();
    }
    enableEdit(index, row_data) {
        //Cancel all previous edits.
        for (const id in this.edit_tracker) {
            this.edit_tracker[id] = false;
        }
        this.edit_tracker[index] = true;
        // Only if edit_parent is true.
        if (this.configs.actions.edit_parent) {
            this.internal_configs.show_parent_col = true;
        }
        this.internal_configs.current_edited_row = { ...row_data };
    }
    findRecordIndex(pathx) {
        for (const index in this.store.processed_data) {
            if (this.store.processed_data[index].pathx === pathx) {
                return Number(index);
            }
        }
    }
    deleteRecord(rec) {
        const index = this.findRecordIndex(rec.pathx);
        if (this.configs.actions.resolve_delete) {
            const promise = new Promise((resolve, reject) => {
                this.rowdelete.emit({
                    data: rec,
                    resolve: resolve
                });
            });
            promise.then(() => {
                this.store.processed_data.splice(index, 1);
                this.store.refreshDisplayData();
            }).catch((err) => { });
        }
        else {
            this.store.processed_data.splice(index, 1);
            this.store.refreshDisplayData();
            this.rowdelete.emit(rec);
        }
    }
    saveRecord($event) {
        this.editcomplete.emit({ event: $event, data: this.row_data });
    }
}
TreeCellActionsComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.2.1", ngImport: i0, type: TreeCellActionsComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
TreeCellActionsComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.2.1", type: TreeCellActionsComponent, selector: "[db-tree-cell-actions]", inputs: { store: "store", edit_tracker: "edit_tracker", internal_configs: "internal_configs", configs: "configs", rowdelete: "rowdelete", row_data: "row_data" }, outputs: { editcomplete: "editcomplete", canceledit: "canceledit" }, ngImport: i0, template: "<ng-container\n  *ngIf=\"configs.actions.edit && configs.row_edit_function(row_data)\"\n>\n  <div *ngIf=\"!edit_tracker[row_data[configs.id_field]]\" class=\"icon-container\">\n    <span\n      (click)=\"enableEdit(row_data[configs.id_field], row_data)\"\n      *ngIf=\"configs.css.edit_icon\"\n      title=\"Edit row\"\n      [innerHTML]=\"this.configs.css.edit_icon | safeHtml\"\n    ></span>\n    <svg\n      (click)=\"enableEdit(row_data[configs.id_field], row_data)\"\n      *ngIf=\"!configs.css.edit_icon\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n    >\n      <title>Edit row</title>\n      <g data-name=\"Layer 2\">\n        <g data-name=\"edit\">\n          <rect width=\"24\" height=\"24\" opacity=\"0\" />\n          <path\n            d=\"M19.4 7.34L16.66 4.6A2 2 0 0 0 14 4.53l-9 9a2 2 0 0 0-.57 1.21L4 18.91a1 1 0 0 0 .29.8A1 1 0 0 0 5 20h.09l4.17-.38a2 2 0 0 0 1.21-.57l9-9a1.92 1.92 0 0 0-.07-2.71zM9.08 17.62l-3 .28.27-3L12 9.32l2.7 2.7zM16 10.68L13.32 8l1.95-2L18 8.73z\"\n          />\n        </g>\n      </g>\n    </svg>\n  </div>\n  <ng-container *ngIf=\"edit_tracker[row_data[configs.id_field]]\">\n    <div class=\"icon-container\">\n      <span\n        (click)=\"saveRecord($event)\"\n        *ngIf=\"configs.css.save_icon\"\n        title=\"Save row\"\n        [innerHTML]=\"this.configs.css.save_icon | safeHtml\"\n      ></span>\n      <svg\n        (click)=\"saveRecord($event)\"\n        title=\"Save row\"\n        *ngIf=\"!configs.css.save_icon\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n      >\n        <title>Save row</title>\n        <g data-name=\"Layer 2\">\n          <g data-name=\"save\">\n            <rect width=\"24\" height=\"24\" opacity=\"0\" />\n            <path\n              d=\"M20.12 8.71l-4.83-4.83A3 3 0 0 0 13.17 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-7.17a3 3 0 0 0-.88-2.12zM10 19v-2h4v2zm9-1a1 1 0 0 1-1 1h-2v-3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h2v5a1 1 0 0 0 1 1h4a1 1 0 0 0 0-2h-3V5h3.17a1.05 1.05 0 0 1 .71.29l4.83 4.83a1 1 0 0 1 .29.71z\"\n            />\n          </g>\n        </g>\n      </svg>\n    </div>\n    <div class=\"icon-container\">\n      <span\n        (click)=\"canceledit.emit(row_data)\"\n        *ngIf=\"configs.css.cancel_icon\"\n        title=\"Cancel row\"\n        [innerHTML]=\"this.configs.css.cancel_icon | safeHtml\"\n      ></span>\n      <svg\n        (click)=\"canceledit.emit(row_data)\"\n        *ngIf=\"!configs.css.cancel_icon\"\n        title=\"Cancel row\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n      >\n        <title>Cancel row</title>\n        <g data-name=\"Layer 2\">\n          <g data-name=\"close\">\n            <rect\n              width=\"24\"\n              height=\"24\"\n              transform=\"rotate(180 12 12)\"\n              opacity=\"0\"\n            />\n            <path\n              d=\"M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z\"\n            />\n          </g>\n        </g>\n      </svg>\n    </div>\n  </ng-container>\n</ng-container>\n<div\n  class=\"icon-container\"\n  *ngIf=\"\n    configs.actions.delete &&\n    !edit_tracker[row_data[configs.id_field]] &&\n    configs.row_delete_function(row_data)\n  \"\n>\n  <span\n    *ngIf=\"configs.css.delete_icon\"\n    title=\"Delete row\"\n    (click)=\"deleteRecord(row_data)\"\n    [innerHTML]=\"this.configs.css.delete_icon | safeHtml\"\n  ></span>\n  <svg\n    *ngIf=\"!configs.css.delete_icon\"\n    title=\"Delete row\"\n    (click)=\"deleteRecord(row_data)\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n  >\n    <title>Delete row</title>\n    <g data-name=\"Layer 2\">\n      <g data-name=\"trash-2\">\n        <rect width=\"24\" height=\"24\" opacity=\"0\" />\n        <path\n          d=\"M21 6h-5V4.33A2.42 2.42 0 0 0 13.5 2h-3A2.42 2.42 0 0 0 8 4.33V6H3a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2zM10 4.33c0-.16.21-.33.5-.33h3c.29 0 .5.17.5.33V6h-4zM18 19a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8h12z\"\n        />\n        <path d=\"M9 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z\" />\n        <path d=\"M15 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z\" />\n      </g>\n    </g>\n  </svg>\n</div>\n", styles: ["svg{width:20px}div.icon-container{display:inline-block;width:50%;text-align:center;color:#000;cursor:pointer}\n"], directives: [{ type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], pipes: { "safeHtml": i2.SafeHtmlPipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.2.1", ngImport: i0, type: TreeCellActionsComponent, decorators: [{
            type: Component,
            args: [{ selector: '[db-tree-cell-actions]', template: "<ng-container\n  *ngIf=\"configs.actions.edit && configs.row_edit_function(row_data)\"\n>\n  <div *ngIf=\"!edit_tracker[row_data[configs.id_field]]\" class=\"icon-container\">\n    <span\n      (click)=\"enableEdit(row_data[configs.id_field], row_data)\"\n      *ngIf=\"configs.css.edit_icon\"\n      title=\"Edit row\"\n      [innerHTML]=\"this.configs.css.edit_icon | safeHtml\"\n    ></span>\n    <svg\n      (click)=\"enableEdit(row_data[configs.id_field], row_data)\"\n      *ngIf=\"!configs.css.edit_icon\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n    >\n      <title>Edit row</title>\n      <g data-name=\"Layer 2\">\n        <g data-name=\"edit\">\n          <rect width=\"24\" height=\"24\" opacity=\"0\" />\n          <path\n            d=\"M19.4 7.34L16.66 4.6A2 2 0 0 0 14 4.53l-9 9a2 2 0 0 0-.57 1.21L4 18.91a1 1 0 0 0 .29.8A1 1 0 0 0 5 20h.09l4.17-.38a2 2 0 0 0 1.21-.57l9-9a1.92 1.92 0 0 0-.07-2.71zM9.08 17.62l-3 .28.27-3L12 9.32l2.7 2.7zM16 10.68L13.32 8l1.95-2L18 8.73z\"\n          />\n        </g>\n      </g>\n    </svg>\n  </div>\n  <ng-container *ngIf=\"edit_tracker[row_data[configs.id_field]]\">\n    <div class=\"icon-container\">\n      <span\n        (click)=\"saveRecord($event)\"\n        *ngIf=\"configs.css.save_icon\"\n        title=\"Save row\"\n        [innerHTML]=\"this.configs.css.save_icon | safeHtml\"\n      ></span>\n      <svg\n        (click)=\"saveRecord($event)\"\n        title=\"Save row\"\n        *ngIf=\"!configs.css.save_icon\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n      >\n        <title>Save row</title>\n        <g data-name=\"Layer 2\">\n          <g data-name=\"save\">\n            <rect width=\"24\" height=\"24\" opacity=\"0\" />\n            <path\n              d=\"M20.12 8.71l-4.83-4.83A3 3 0 0 0 13.17 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-7.17a3 3 0 0 0-.88-2.12zM10 19v-2h4v2zm9-1a1 1 0 0 1-1 1h-2v-3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h2v5a1 1 0 0 0 1 1h4a1 1 0 0 0 0-2h-3V5h3.17a1.05 1.05 0 0 1 .71.29l4.83 4.83a1 1 0 0 1 .29.71z\"\n            />\n          </g>\n        </g>\n      </svg>\n    </div>\n    <div class=\"icon-container\">\n      <span\n        (click)=\"canceledit.emit(row_data)\"\n        *ngIf=\"configs.css.cancel_icon\"\n        title=\"Cancel row\"\n        [innerHTML]=\"this.configs.css.cancel_icon | safeHtml\"\n      ></span>\n      <svg\n        (click)=\"canceledit.emit(row_data)\"\n        *ngIf=\"!configs.css.cancel_icon\"\n        title=\"Cancel row\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        viewBox=\"0 0 24 24\"\n      >\n        <title>Cancel row</title>\n        <g data-name=\"Layer 2\">\n          <g data-name=\"close\">\n            <rect\n              width=\"24\"\n              height=\"24\"\n              transform=\"rotate(180 12 12)\"\n              opacity=\"0\"\n            />\n            <path\n              d=\"M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z\"\n            />\n          </g>\n        </g>\n      </svg>\n    </div>\n  </ng-container>\n</ng-container>\n<div\n  class=\"icon-container\"\n  *ngIf=\"\n    configs.actions.delete &&\n    !edit_tracker[row_data[configs.id_field]] &&\n    configs.row_delete_function(row_data)\n  \"\n>\n  <span\n    *ngIf=\"configs.css.delete_icon\"\n    title=\"Delete row\"\n    (click)=\"deleteRecord(row_data)\"\n    [innerHTML]=\"this.configs.css.delete_icon | safeHtml\"\n  ></span>\n  <svg\n    *ngIf=\"!configs.css.delete_icon\"\n    title=\"Delete row\"\n    (click)=\"deleteRecord(row_data)\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 24 24\"\n  >\n    <title>Delete row</title>\n    <g data-name=\"Layer 2\">\n      <g data-name=\"trash-2\">\n        <rect width=\"24\" height=\"24\" opacity=\"0\" />\n        <path\n          d=\"M21 6h-5V4.33A2.42 2.42 0 0 0 13.5 2h-3A2.42 2.42 0 0 0 8 4.33V6H3a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2zM10 4.33c0-.16.21-.33.5-.33h3c.29 0 .5.17.5.33V6h-4zM18 19a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8h12z\"\n        />\n        <path d=\"M9 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z\" />\n        <path d=\"M15 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z\" />\n      </g>\n    </g>\n  </svg>\n</div>\n", styles: ["svg{width:20px}div.icon-container{display:inline-block;width:50%;text-align:center;color:#000;cursor:pointer}\n"] }]
        }], ctorParameters: function () { return []; }, propDecorators: { store: [{
                type: Input
            }], edit_tracker: [{
                type: Input
            }], internal_configs: [{
                type: Input
            }], configs: [{
                type: Input
            }], rowdelete: [{
                type: Input
            }], row_data: [{
                type: Input
            }], editcomplete: [{
                type: Output
            }], canceledit: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJlZS1jZWxsLWFjdGlvbnMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYW5ndWxhci10cmVlLWdyaWQvc3JjL2xpYi9tb2R1bGVzL3RyZWUtY2VsbC9jb21wb25lbnRzL3RyZWUtY2VsbC1hY3Rpb25zL3RyZWUtY2VsbC1hY3Rpb25zLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2FuZ3VsYXItdHJlZS1ncmlkL3NyYy9saWIvbW9kdWxlcy90cmVlLWNlbGwvY29tcG9uZW50cy90cmVlLWNlbGwtYWN0aW9ucy90cmVlLWNlbGwtYWN0aW9ucy5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDOzs7O0FBUy9FLE1BQU0sT0FBTyx3QkFBd0I7SUF3Qm5DO1FBSFUsaUJBQVksR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUNyRCxlQUFVLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7SUFFN0MsQ0FBQztJQUVqQixRQUFRO1FBQ04sSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ2xELENBQUM7SUFFRCxVQUFVLENBQUMsS0FBSyxFQUFFLFFBQVE7UUFFeEIsNEJBQTRCO1FBQzVCLEtBQUssTUFBTSxFQUFFLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUNsQyxJQUFJLENBQUMsWUFBWSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQztTQUMvQjtRQUVELElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBRWhDLCtCQUErQjtRQUMvQixJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRTtZQUNwQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQztTQUM5QztRQUNELElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxrQkFBa0IsR0FBRyxFQUFDLEdBQUcsUUFBUSxFQUFDLENBQUM7SUFDM0QsQ0FBQztJQUVELGVBQWUsQ0FBQyxLQUFhO1FBQzNCLEtBQUssTUFBTSxLQUFLLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLEVBQUU7WUFDN0MsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEtBQUssS0FBSyxFQUFFO2dCQUNwRCxPQUFPLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN0QjtTQUNGO0lBQ0gsQ0FBQztJQUVELFlBQVksQ0FBQyxHQUFHO1FBQ2QsTUFBTSxLQUFLLEdBQVcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEQsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxjQUFjLEVBQUU7WUFDdkMsTUFBTSxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUMsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUU7Z0JBQzlDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDO29CQUNsQixJQUFJLEVBQUUsR0FBRztvQkFDVCxPQUFPLEVBQUUsT0FBTztpQkFDakIsQ0FBQyxDQUFDO1lBQ0wsQ0FBQyxDQUFDLENBQUM7WUFFSCxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTtnQkFDaEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDM0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQ2xDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEdBQUUsQ0FBQyxDQUFDLENBQUM7U0FDdkI7YUFBTTtZQUNMLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDM0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO1lBQ2hDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQzFCO0lBQ0gsQ0FBQztJQUVELFVBQVUsQ0FBQyxNQUFNO1FBQ2YsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFDLENBQUMsQ0FBQztJQUMvRCxDQUFDOztxSEE3RVUsd0JBQXdCO3lHQUF4Qix3QkFBd0IscVNDVHJDLDYxSUF1SEE7MkZEOUdhLHdCQUF3QjtrQkFMcEMsU0FBUzsrQkFDRSx3QkFBd0I7MEVBUWxDLEtBQUs7c0JBREosS0FBSztnQkFJTixZQUFZO3NCQURYLEtBQUs7Z0JBSU4sZ0JBQWdCO3NCQURmLEtBQUs7Z0JBSU4sT0FBTztzQkFETixLQUFLO2dCQUlOLFNBQVM7c0JBRFIsS0FBSztnQkFJTixRQUFRO3NCQURQLEtBQUs7Z0JBR0ksWUFBWTtzQkFBckIsTUFBTTtnQkFDRyxVQUFVO3NCQUFuQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29uZmlncyB9IGZyb20gJy4uLy4uLy4uLy4uL21vZGVscy9Db25maWdzLm1vZGVsJztcbmltcG9ydCB7IFN0b3JlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3RvcmUvc3RvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdbZGItdHJlZS1jZWxsLWFjdGlvbnNdJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3RyZWUtY2VsbC1hY3Rpb25zLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vdHJlZS1jZWxsLWFjdGlvbnMuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBUcmVlQ2VsbEFjdGlvbnNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBkaXNwbGF5X2RhdGE6IGFueTtcblxuICBASW5wdXQoKVxuICBzdG9yZTogU3RvcmU7XG5cbiAgQElucHV0KClcbiAgZWRpdF90cmFja2VyOiBhbnk7XG5cbiAgQElucHV0KClcbiAgaW50ZXJuYWxfY29uZmlnczogYW55O1xuXG4gIEBJbnB1dCgpXG4gIGNvbmZpZ3M6IENvbmZpZ3M7XG5cbiAgQElucHV0KClcbiAgcm93ZGVsZXRlOiBFdmVudEVtaXR0ZXI8YW55PjtcblxuICBASW5wdXQoKVxuICByb3dfZGF0YTogYW55O1xuXG4gIEBPdXRwdXQoKSBlZGl0Y29tcGxldGU6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBAT3V0cHV0KCkgY2FuY2VsZWRpdDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgY29uc3RydWN0b3IoKSB7IH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmRpc3BsYXlfZGF0YSA9IHRoaXMuc3RvcmUuZ2V0RGlzcGxheURhdGEoKTtcbiAgfVxuXG4gIGVuYWJsZUVkaXQoaW5kZXgsIHJvd19kYXRhKSB7XG5cbiAgICAvL0NhbmNlbCBhbGwgcHJldmlvdXMgZWRpdHMuXG4gICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLmVkaXRfdHJhY2tlcikge1xuICAgICAgdGhpcy5lZGl0X3RyYWNrZXJbaWRdID0gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIHRoaXMuZWRpdF90cmFja2VyW2luZGV4XSA9IHRydWU7XG5cbiAgICAvLyBPbmx5IGlmIGVkaXRfcGFyZW50IGlzIHRydWUuXG4gICAgaWYgKHRoaXMuY29uZmlncy5hY3Rpb25zLmVkaXRfcGFyZW50KSB7XG4gICAgICB0aGlzLmludGVybmFsX2NvbmZpZ3Muc2hvd19wYXJlbnRfY29sID0gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5pbnRlcm5hbF9jb25maWdzLmN1cnJlbnRfZWRpdGVkX3JvdyA9IHsuLi5yb3dfZGF0YX07XG4gIH1cblxuICBmaW5kUmVjb3JkSW5kZXgocGF0aHg6IG51bWJlcikge1xuICAgIGZvciAoY29uc3QgaW5kZXggaW4gdGhpcy5zdG9yZS5wcm9jZXNzZWRfZGF0YSkge1xuICAgICAgaWYgKHRoaXMuc3RvcmUucHJvY2Vzc2VkX2RhdGFbaW5kZXhdLnBhdGh4ID09PSBwYXRoeCkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKGluZGV4KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBkZWxldGVSZWNvcmQocmVjKSB7XG4gICAgY29uc3QgaW5kZXg6IG51bWJlciA9IHRoaXMuZmluZFJlY29yZEluZGV4KHJlYy5wYXRoeCk7XG4gICAgaWYgKHRoaXMuY29uZmlncy5hY3Rpb25zLnJlc29sdmVfZGVsZXRlKSB7XG4gICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICB0aGlzLnJvd2RlbGV0ZS5lbWl0KHtcbiAgICAgICAgICBkYXRhOiByZWMsXG4gICAgICAgICAgcmVzb2x2ZTogcmVzb2x2ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLnN0b3JlLnByb2Nlc3NlZF9kYXRhLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMuc3RvcmUucmVmcmVzaERpc3BsYXlEYXRhKCk7XG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7fSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RvcmUucHJvY2Vzc2VkX2RhdGEuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIHRoaXMuc3RvcmUucmVmcmVzaERpc3BsYXlEYXRhKCk7XG4gICAgICB0aGlzLnJvd2RlbGV0ZS5lbWl0KHJlYyk7XG4gICAgfVxuICB9XG5cbiAgc2F2ZVJlY29yZCgkZXZlbnQpIHtcbiAgICB0aGlzLmVkaXRjb21wbGV0ZS5lbWl0KHtldmVudDogJGV2ZW50LCBkYXRhOiB0aGlzLnJvd19kYXRhfSk7XG4gIH1cblxufVxuIiwiPG5nLWNvbnRhaW5lclxuICAqbmdJZj1cImNvbmZpZ3MuYWN0aW9ucy5lZGl0ICYmIGNvbmZpZ3Mucm93X2VkaXRfZnVuY3Rpb24ocm93X2RhdGEpXCJcbj5cbiAgPGRpdiAqbmdJZj1cIiFlZGl0X3RyYWNrZXJbcm93X2RhdGFbY29uZmlncy5pZF9maWVsZF1dXCIgY2xhc3M9XCJpY29uLWNvbnRhaW5lclwiPlxuICAgIDxzcGFuXG4gICAgICAoY2xpY2spPVwiZW5hYmxlRWRpdChyb3dfZGF0YVtjb25maWdzLmlkX2ZpZWxkXSwgcm93X2RhdGEpXCJcbiAgICAgICpuZ0lmPVwiY29uZmlncy5jc3MuZWRpdF9pY29uXCJcbiAgICAgIHRpdGxlPVwiRWRpdCByb3dcIlxuICAgICAgW2lubmVySFRNTF09XCJ0aGlzLmNvbmZpZ3MuY3NzLmVkaXRfaWNvbiB8IHNhZmVIdG1sXCJcbiAgICA+PC9zcGFuPlxuICAgIDxzdmdcbiAgICAgIChjbGljayk9XCJlbmFibGVFZGl0KHJvd19kYXRhW2NvbmZpZ3MuaWRfZmllbGRdLCByb3dfZGF0YSlcIlxuICAgICAgKm5nSWY9XCIhY29uZmlncy5jc3MuZWRpdF9pY29uXCJcbiAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgPlxuICAgICAgPHRpdGxlPkVkaXQgcm93PC90aXRsZT5cbiAgICAgIDxnIGRhdGEtbmFtZT1cIkxheWVyIDJcIj5cbiAgICAgICAgPGcgZGF0YS1uYW1lPVwiZWRpdFwiPlxuICAgICAgICAgIDxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIG9wYWNpdHk9XCIwXCIgLz5cbiAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgZD1cIk0xOS40IDcuMzRMMTYuNjYgNC42QTIgMiAwIDAgMCAxNCA0LjUzbC05IDlhMiAyIDAgMCAwLS41NyAxLjIxTDQgMTguOTFhMSAxIDAgMCAwIC4yOS44QTEgMSAwIDAgMCA1IDIwaC4wOWw0LjE3LS4zOGEyIDIgMCAwIDAgMS4yMS0uNTdsOS05YTEuOTIgMS45MiAwIDAgMC0uMDctMi43MXpNOS4wOCAxNy42MmwtMyAuMjguMjctM0wxMiA5LjMybDIuNyAyLjd6TTE2IDEwLjY4TDEzLjMyIDhsMS45NS0yTDE4IDguNzN6XCJcbiAgICAgICAgICAvPlxuICAgICAgICA8L2c+XG4gICAgICA8L2c+XG4gICAgPC9zdmc+XG4gIDwvZGl2PlxuICA8bmctY29udGFpbmVyICpuZ0lmPVwiZWRpdF90cmFja2VyW3Jvd19kYXRhW2NvbmZpZ3MuaWRfZmllbGRdXVwiPlxuICAgIDxkaXYgY2xhc3M9XCJpY29uLWNvbnRhaW5lclwiPlxuICAgICAgPHNwYW5cbiAgICAgICAgKGNsaWNrKT1cInNhdmVSZWNvcmQoJGV2ZW50KVwiXG4gICAgICAgICpuZ0lmPVwiY29uZmlncy5jc3Muc2F2ZV9pY29uXCJcbiAgICAgICAgdGl0bGU9XCJTYXZlIHJvd1wiXG4gICAgICAgIFtpbm5lckhUTUxdPVwidGhpcy5jb25maWdzLmNzcy5zYXZlX2ljb24gfCBzYWZlSHRtbFwiXG4gICAgICA+PC9zcGFuPlxuICAgICAgPHN2Z1xuICAgICAgICAoY2xpY2spPVwic2F2ZVJlY29yZCgkZXZlbnQpXCJcbiAgICAgICAgdGl0bGU9XCJTYXZlIHJvd1wiXG4gICAgICAgICpuZ0lmPVwiIWNvbmZpZ3MuY3NzLnNhdmVfaWNvblwiXG4gICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgID5cbiAgICAgICAgPHRpdGxlPlNhdmUgcm93PC90aXRsZT5cbiAgICAgICAgPGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPlxuICAgICAgICAgIDxnIGRhdGEtbmFtZT1cInNhdmVcIj5cbiAgICAgICAgICAgIDxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIG9wYWNpdHk9XCIwXCIgLz5cbiAgICAgICAgICAgIDxwYXRoXG4gICAgICAgICAgICAgIGQ9XCJNMjAuMTIgOC43MWwtNC44My00LjgzQTMgMyAwIDAgMCAxMy4xNyAzSDZhMyAzIDAgMCAwLTMgM3YxMmEzIDMgMCAwIDAgMyAzaDEyYTMgMyAwIDAgMCAzLTN2LTcuMTdhMyAzIDAgMCAwLS44OC0yLjEyek0xMCAxOXYtMmg0djJ6bTktMWExIDEgMCAwIDEtMSAxaC0ydi0zYTEgMSAwIDAgMC0xLTFIOWExIDEgMCAwIDAtMSAxdjNINmExIDEgMCAwIDEtMS0xVjZhMSAxIDAgMCAxIDEtMWgydjVhMSAxIDAgMCAwIDEgMWg0YTEgMSAwIDAgMCAwLTJoLTNWNWgzLjE3YTEuMDUgMS4wNSAwIDAgMSAuNzEuMjlsNC44MyA0LjgzYTEgMSAwIDAgMSAuMjkuNzF6XCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9nPlxuICAgICAgICA8L2c+XG4gICAgICA8L3N2Zz5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiaWNvbi1jb250YWluZXJcIj5cbiAgICAgIDxzcGFuXG4gICAgICAgIChjbGljayk9XCJjYW5jZWxlZGl0LmVtaXQocm93X2RhdGEpXCJcbiAgICAgICAgKm5nSWY9XCJjb25maWdzLmNzcy5jYW5jZWxfaWNvblwiXG4gICAgICAgIHRpdGxlPVwiQ2FuY2VsIHJvd1wiXG4gICAgICAgIFtpbm5lckhUTUxdPVwidGhpcy5jb25maWdzLmNzcy5jYW5jZWxfaWNvbiB8IHNhZmVIdG1sXCJcbiAgICAgID48L3NwYW4+XG4gICAgICA8c3ZnXG4gICAgICAgIChjbGljayk9XCJjYW5jZWxlZGl0LmVtaXQocm93X2RhdGEpXCJcbiAgICAgICAgKm5nSWY9XCIhY29uZmlncy5jc3MuY2FuY2VsX2ljb25cIlxuICAgICAgICB0aXRsZT1cIkNhbmNlbCByb3dcIlxuICAgICAgICB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJcbiAgICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiXG4gICAgICA+XG4gICAgICAgIDx0aXRsZT5DYW5jZWwgcm93PC90aXRsZT5cbiAgICAgICAgPGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPlxuICAgICAgICAgIDxnIGRhdGEtbmFtZT1cImNsb3NlXCI+XG4gICAgICAgICAgICA8cmVjdFxuICAgICAgICAgICAgICB3aWR0aD1cIjI0XCJcbiAgICAgICAgICAgICAgaGVpZ2h0PVwiMjRcIlxuICAgICAgICAgICAgICB0cmFuc2Zvcm09XCJyb3RhdGUoMTgwIDEyIDEyKVwiXG4gICAgICAgICAgICAgIG9wYWNpdHk9XCIwXCJcbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8cGF0aFxuICAgICAgICAgICAgICBkPVwiTTEzLjQxIDEybDQuMy00LjI5YTEgMSAwIDEgMC0xLjQyLTEuNDJMMTIgMTAuNTlsLTQuMjktNC4zYTEgMSAwIDAgMC0xLjQyIDEuNDJsNC4zIDQuMjktNC4zIDQuMjlhMSAxIDAgMCAwIDAgMS40MiAxIDEgMCAwIDAgMS40MiAwbDQuMjktNC4zIDQuMjkgNC4zYTEgMSAwIDAgMCAxLjQyIDAgMSAxIDAgMCAwIDAtMS40MnpcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2c+XG4gICAgICAgIDwvZz5cbiAgICAgIDwvc3ZnPlxuICAgIDwvZGl2PlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctY29udGFpbmVyPlxuPGRpdlxuICBjbGFzcz1cImljb24tY29udGFpbmVyXCJcbiAgKm5nSWY9XCJcbiAgICBjb25maWdzLmFjdGlvbnMuZGVsZXRlICYmXG4gICAgIWVkaXRfdHJhY2tlcltyb3dfZGF0YVtjb25maWdzLmlkX2ZpZWxkXV0gJiZcbiAgICBjb25maWdzLnJvd19kZWxldGVfZnVuY3Rpb24ocm93X2RhdGEpXG4gIFwiXG4+XG4gIDxzcGFuXG4gICAgKm5nSWY9XCJjb25maWdzLmNzcy5kZWxldGVfaWNvblwiXG4gICAgdGl0bGU9XCJEZWxldGUgcm93XCJcbiAgICAoY2xpY2spPVwiZGVsZXRlUmVjb3JkKHJvd19kYXRhKVwiXG4gICAgW2lubmVySFRNTF09XCJ0aGlzLmNvbmZpZ3MuY3NzLmRlbGV0ZV9pY29uIHwgc2FmZUh0bWxcIlxuICA+PC9zcGFuPlxuICA8c3ZnXG4gICAgKm5nSWY9XCIhY29uZmlncy5jc3MuZGVsZXRlX2ljb25cIlxuICAgIHRpdGxlPVwiRGVsZXRlIHJvd1wiXG4gICAgKGNsaWNrKT1cImRlbGV0ZVJlY29yZChyb3dfZGF0YSlcIlxuICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIlxuICA+XG4gICAgPHRpdGxlPkRlbGV0ZSByb3c8L3RpdGxlPlxuICAgIDxnIGRhdGEtbmFtZT1cIkxheWVyIDJcIj5cbiAgICAgIDxnIGRhdGEtbmFtZT1cInRyYXNoLTJcIj5cbiAgICAgICAgPHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgb3BhY2l0eT1cIjBcIiAvPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgIGQ9XCJNMjEgNmgtNVY0LjMzQTIuNDIgMi40MiAwIDAgMCAxMy41IDJoLTNBMi40MiAyLjQyIDAgMCAwIDggNC4zM1Y2SDNhMSAxIDAgMCAwIDAgMmgxdjExYTMgMyAwIDAgMCAzIDNoMTBhMyAzIDAgMCAwIDMtM1Y4aDFhMSAxIDAgMCAwIDAtMnpNMTAgNC4zM2MwLS4xNi4yMS0uMzMuNS0uMzNoM2MuMjkgMCAuNS4xNy41LjMzVjZoLTR6TTE4IDE5YTEgMSAwIDAgMS0xIDFIN2ExIDEgMCAwIDEtMS0xVjhoMTJ6XCJcbiAgICAgICAgLz5cbiAgICAgICAgPHBhdGggZD1cIk05IDE3YTEgMSAwIDAgMCAxLTF2LTRhMSAxIDAgMCAwLTIgMHY0YTEgMSAwIDAgMCAxIDF6XCIgLz5cbiAgICAgICAgPHBhdGggZD1cIk0xNSAxN2ExIDEgMCAwIDAgMS0xdi00YTEgMSAwIDAgMC0yIDB2NGExIDEgMCAwIDAgMSAxelwiIC8+XG4gICAgICA8L2c+XG4gICAgPC9nPlxuICA8L3N2Zz5cbjwvZGl2PlxuIl19